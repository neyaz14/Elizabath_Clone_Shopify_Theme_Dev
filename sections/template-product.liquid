{% assign current_variant = product.selected_or_first_available_variant %}
{% assign featured_image = current_variant.featured_image | default: product.featured_image %}

<div class="max-w-6xl mx-auto px-4 py-8 grid grid-cols-1 md:grid-cols-2 gap-10">
  <!-- Product Images -->
  <div>
    <div class="border rounded-lg overflow-hidden">
      <img
        src="{{ featured_image | img_url: 'large' }}"
        alt="{{ featured_image.alt | escape }}"
        id="ProductPhotoImg"
        class="w-full object-cover"
      >
    </div>

    <div class="flex gap-4 mt-4 overflow-x-auto">
      {% for image in product.images %}
        <a href="{{ image.src | img_url: 'large' }}" class="border rounded hover:ring-2 ring-indigo-500 transition">
          <img
            src="{{ image.src | img_url: 'compact' }}"
            alt="{{ image.alt | escape }}"
            class="w-20 h-20 object-cover"
          >
        </a>
      {% endfor %}
    </div>
  </div>

  <!-- Product Details -->
  <div class="space-y-6">
    <h1 class="text-3xl font-bold text-gray-900">{{ product.title }}</h1>

    <form
      action="/cart/add"
      method="post"
      enctype="multipart/form-data"
      id="AddToCartForm"
      class="space-y-4"
    >
      <div>
        <label for="productSelect" class="block text-sm font-medium text-gray-700">Select Variant:</label>
        <select
          name="id"
          id="productSelect"
          class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:ring-indigo-500 focus:border-indigo-500"
        >
          {% for variant in product.variants %}
            {% if variant.available %}
              <option value="{{ variant.id }}">{{ variant.title }} - {{ variant.price | money_with_currency }}</option>
            {% else %}
              <option disabled>{{ variant.title }} - Sold out</option>
            {% endif %}
          {% endfor %}
        </select>
      </div>

      <div class="text-xl font-semibold text-green-600">
        {{ current_variant.price | money }}
      </div>

      <div>
        <label for="Quantity" class="block text-sm font-medium text-gray-700">Quantity:</label>
        <input
          type="number"
          id="Quantity"
          name="quantity"
          value="1"
          min="1"
          class="mt-1 block w-24 rounded-md border-gray-300 shadow-sm focus:ring-indigo-500 focus:border-indigo-500"
        >
      </div>

      <button
        type="submit"
        name="add"
        id="AddToCart"
        class="bg-indigo-600 hover:bg-indigo-700 text-white font-medium px-6 py-3 rounded-md shadow"
      >
        Add to Cart
      </button>
    </form>

    <div class="prose max-w-none mt-6">
      {{ product.description }}
    </div>
  </div>
</div>
